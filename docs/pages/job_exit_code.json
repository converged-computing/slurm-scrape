{
    "url": "https://slurm.schedmd.com/job_exit_code.html",
    "sections": [
        {
            "title": "\n\nSlurm Workload Manager\n\n",
            "content": "\n\nSchedMD\n\n"
        },
        {
            "title": "Job Exit Codes",
            "content": "A job's exit code (aka exit status, return code and completion\ncode) is captured by Slurm and saved as part of the job record.  For\nsbatch jobs, the exit code that is captured is the output of the batch\nscript.  For salloc jobs, the exit code will be the return value of\nthe exit call that terminates the salloc session.  For srun, the exit\ncode will be the return value of the command that srun executes.Any non-zero exit code will be assumed to be a job failure and will\nresult in a Job State of FAILED with a Reason of\n\"NonZeroExitCode\".The exit code is an 8 bit unsigned number ranging between 0 and\n255.  While it is possible for a job to return a negative exit code,\nSlurm will display it as an unsigned value in the 0 - 255 range.Job Step Exit Codes\n\nWhen a job contains multiple job steps, the exit code of each\nexecutable invoked by srun is saved individually to the job step\nrecord.Signaled JobsWhen a job or step is sent a signal that causes its termination,\nSlurm also captures the signal number and saves it to the job or step\nrecord.Displaying Exit Codes and Signals\n\nSlurm displays a job's exit code in the output of the scontrol\nshow job and the sview utility.  Slurm displays job step\nexit codes in the output of the scontrol show step and the\nsview utility.\n\nWhen a signal was responsible for a job or step's termination, the\nsignal number will be displayed after the exit code, delineated by a\ncolon(:).\nDatabase Job/Step Records\nThe Slurm control daemon sends job and step records to the Slurm\ndatabase when the Slurm accounting_storage plugin is installed.  Job\nand step records sent to the Slurm db can be viewed using the\nsacct command.  The default sacct output contains an\nExitCode field whose format mirrors the output of scontrol and\nsview described above.\nDerived Exit Code and Comment String\n\n\nAfter reading the above description of a job's exit code, one can\nimagine a scenario where a central task of a batch job fails but the\nscript returns an exit code of zero, indicating success.  In many\ncases, a user may not be able to ascertain the success or failure of a\njob until after they have examined the job's output files.\nThe job includes a \"derived exit code\" field.\nIt is initially set to the value of the highest\nexit code returned by all of the job's steps (srun invocations).  The\njob's derived exit code is determined by the Slurm control daemon\nand sent to the database when the accounting_storage plugin is\nenabled.\nIn addition to the derived exit code, the job record in the Slurm\ndatabase contains a comment string.  This is initialized to the job's\ncomment string (when AccountingStoreFlags parameter in the\nslurm.conf contains 'job_comment') and can only be changed by the user.\nA new option has been added to the sacctmgr command to\nprovide the user the means to modify these two fields of the job\nrecord.  No other modification to the job record is allowed.  For\nthose who prefer a simpler command specifically designed to view and\nmodify the derived exit code and comment string, the\nsjobexitmod wrapper has been created (see below).\nThe user now has the means to annotate a job's exit code after it\ncompletes and provide a description of what failed.  This includes the\nability to annotate a successful completion to jobs that appear to\nhave failed but actually succeeded.\nThe sjobexitmod command\n\n\nThe sjobexitmod command is available to display and update the\ntwo derived exit fields of the Slurm db's job record.\nsjobexitmod can first be used to display the existing exit code\n/ string for a job:\n\n> sjobexitmod -l 123\nJobID Account NNodes NodeList     State ExitCode DerivedExitCode Comment\n----- ------- ------ -------- --------- -------- --------------- -------\n123        lc      1     tux0 COMPLETED      0:0             0:0\n\n\nIf a change is desired, sjobexitmod can modify the derived fields:\n\n\n> sjobexitmod -e 49 -r \"out of memory\" 123\n\n Modification of job 123 was successful.\n\n> sjobexitmod -l 123\nJobID Account NNodes NodeList     State ExitCode DerivedExitCode Comment\n----- ------- ------ -------- --------- -------- --------------- -------\n123        lc      1     tux0 COMPLETED      0:0            49:0 out of memory\n\nThe existing sacct command also supports the two new derived\nexit fields:\n\n> sacct -X -j 123 -o JobID,NNodes,State,ExitCode,DerivedExitcode,Comment\nJobID   NNodes      State ExitCode DerivedExitCode        Comment\n------ ------- ---------- -------- --------------- --------------\n123          1  COMPLETED      0:0            49:0  out of memory\n\nLast modified 15 April 2015\n"
        },
        {
            "title": "Derived Exit Code and Comment String\n\n",
            "content": "After reading the above description of a job's exit code, one can\nimagine a scenario where a central task of a batch job fails but the\nscript returns an exit code of zero, indicating success.  In many\ncases, a user may not be able to ascertain the success or failure of a\njob until after they have examined the job's output files.The job includes a \"derived exit code\" field.\nIt is initially set to the value of the highest\nexit code returned by all of the job's steps (srun invocations).  The\njob's derived exit code is determined by the Slurm control daemon\nand sent to the database when the accounting_storage plugin is\nenabled.In addition to the derived exit code, the job record in the Slurm\ndatabase contains a comment string.  This is initialized to the job's\ncomment string (when AccountingStoreFlags parameter in the\nslurm.conf contains 'job_comment') and can only be changed by the user.A new option has been added to the sacctmgr command to\nprovide the user the means to modify these two fields of the job\nrecord.  No other modification to the job record is allowed.  For\nthose who prefer a simpler command specifically designed to view and\nmodify the derived exit code and comment string, the\nsjobexitmod wrapper has been created (see below).The user now has the means to annotate a job's exit code after it\ncompletes and provide a description of what failed.  This includes the\nability to annotate a successful completion to jobs that appear to\nhave failed but actually succeeded.The sjobexitmod command\n\nThe sjobexitmod command is available to display and update the\ntwo derived exit fields of the Slurm db's job record.\nsjobexitmod can first be used to display the existing exit code\n/ string for a job:\n> sjobexitmod -l 123\nJobID Account NNodes NodeList     State ExitCode DerivedExitCode Comment\n----- ------- ------ -------- --------- -------- --------------- -------\n123        lc      1     tux0 COMPLETED      0:0             0:0\nsjobexitmod\n> sjobexitmod -e 49 -r \"out of memory\" 123\n\n Modification of job 123 was successful.\n\n> sjobexitmod -l 123\nJobID Account NNodes NodeList     State ExitCode DerivedExitCode Comment\n----- ------- ------ -------- --------- -------- --------------- -------\n123        lc      1     tux0 COMPLETED      0:0            49:0 out of memory\nThe existing sacct command also supports the two new derived\nexit fields:\n> sacct -X -j 123 -o JobID,NNodes,State,ExitCode,DerivedExitcode,Comment\nJobID   NNodes      State ExitCode DerivedExitCode        Comment\n------ ------- ---------- -------- --------------- --------------\n123          1  COMPLETED      0:0            49:0  out of memory\nLast modified 15 April 2015"
        },
        {
            "title": "Navigation",
            "content": "\nSlurm Workload Manager\nVersion 24.05\n\n\nAbout\n\nOverview\nRelease Notes\n\n\n\nUsing\n\nDocumentation\nFAQ\nPublications\n\n\n\nInstalling\n\nDownload\nRelated Software\nInstallation Guide\n\n\n\nGetting Help\n\nMailing Lists\nSupport and Training\nTroubleshooting\n\n\n"
        },
        {
            "title": "Database Job/Step Records",
            "content": "The Slurm control daemon sends job and step records to the Slurm\ndatabase when the Slurm accounting_storage plugin is installed.  Job\nand step records sent to the Slurm db can be viewed using the\nsacct command.  The default sacct output contains an\nExitCode field whose format mirrors the output of scontrol and\nsview described above.Derived Exit Code and Comment String\n\nAfter reading the above description of a job's exit code, one can\nimagine a scenario where a central task of a batch job fails but the\nscript returns an exit code of zero, indicating success.  In many\ncases, a user may not be able to ascertain the success or failure of a\njob until after they have examined the job's output files.The job includes a \"derived exit code\" field.\nIt is initially set to the value of the highest\nexit code returned by all of the job's steps (srun invocations).  The\njob's derived exit code is determined by the Slurm control daemon\nand sent to the database when the accounting_storage plugin is\nenabled.In addition to the derived exit code, the job record in the Slurm\ndatabase contains a comment string.  This is initialized to the job's\ncomment string (when AccountingStoreFlags parameter in the\nslurm.conf contains 'job_comment') and can only be changed by the user.A new option has been added to the sacctmgr command to\nprovide the user the means to modify these two fields of the job\nrecord.  No other modification to the job record is allowed.  For\nthose who prefer a simpler command specifically designed to view and\nmodify the derived exit code and comment string, the\nsjobexitmod wrapper has been created (see below).The user now has the means to annotate a job's exit code after it\ncompletes and provide a description of what failed.  This includes the\nability to annotate a successful completion to jobs that appear to\nhave failed but actually succeeded.The sjobexitmod command\n\nThe sjobexitmod command is available to display and update the\ntwo derived exit fields of the Slurm db's job record.\nsjobexitmod can first be used to display the existing exit code\n/ string for a job:\n> sjobexitmod -l 123\nJobID Account NNodes NodeList     State ExitCode DerivedExitCode Comment\n----- ------- ------ -------- --------- -------- --------------- -------\n123        lc      1     tux0 COMPLETED      0:0             0:0\nsjobexitmod\n> sjobexitmod -e 49 -r \"out of memory\" 123\n\n Modification of job 123 was successful.\n\n> sjobexitmod -l 123\nJobID Account NNodes NodeList     State ExitCode DerivedExitCode Comment\n----- ------- ------ -------- --------- -------- --------------- -------\n123        lc      1     tux0 COMPLETED      0:0            49:0 out of memory\nThe existing sacct command also supports the two new derived\nexit fields:\n> sacct -X -j 123 -o JobID,NNodes,State,ExitCode,DerivedExitcode,Comment\nJobID   NNodes      State ExitCode DerivedExitCode        Comment\n------ ------- ---------- -------- --------------- --------------\n123          1  COMPLETED      0:0            49:0  out of memory\nLast modified 15 April 2015"
        }
    ]
}